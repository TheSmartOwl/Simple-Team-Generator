<html>
  <head>
    <style>
      * { font-size: 28px; font-family: Georgia; text-align: center}
      h1, p { color: #f0f0f0 }
      body { background-color: #1D1E22 }
    </style>
  </head>
  <body>
    <script type="module">
	  //Bob,Joe,Simon,Alice
      import 'https://cdnjs.cloudflare.com/ajax/libs/vue/2.7.8/vue.min.js'
      let app = new Vue({
        el: "#app",
        data: {
		  layers: 1,
		  teams: 2,
          names: {
            layer1_in: "",
            layer1_out: [],
            layer2_in: "",
            layer2_out: []
          },
        },
        methods: {
          get_names(stringed_names) {
			return stringed_names.split(",")
		  },
		  split_into_teams(names,count) {
		    const shuffled = [...names].sort(() => Math.random() - 0.5)
			const groups = Array.from({ length: count }, () => [])
			shuffled.forEach((item, index) => {
			  groups[index % count].push(item)
			})
			return groups
		  },
		  combine_at_index(arr1, arr2): {
			const max_length = Math.max(arr1.length, arr2.length)
			const result = []
			for (let i = 0; i < max_length; i++) {
              const a = arr1[i] || []
			  const b = arr2[i] || []
			  result.push([...a, ...b])
		    }
			  return result
		  }
        }
      })
    </script>
    <div id='app'>
      <h1>Simple Team Generator</h1>
	  <input type="range" min="1" max="2" v-model:value="layers" class="slider" id="layers"><br><br>
	  <input type="range" min="2" max="4" v-model:value="teams" class="slider" id="teams"><br><br>
	  <div id="layer1" v-show='layers == 1'>
        <input type="text" v-model:value="names.layer1_in"><br><br>
	    <button @click="names.layer1_out=split_into_teams(get_names(names.layer1_in),2)">Run</button><br><br>
        {{names.layer1_out}}
	  </div>
	  <div id="layer1" v-show='layers == 2'>
        <input type="text" v-model:value="names.layer1_in"><br><br>
		<input type="text" v-model:value="names.layer2_in"><br><br>
	    <button @click="names.layer1_out=split_into_teams(get_names(names.layer1_in),teams); names.layer2_out=split_into_teams(get_names(names.layer2_in),teams)">Run</button><br><br>
        {{names.layer1_out}}
		{{names.layer2_out}}
		{{combine_at_index(names.layer1_out, names.layer2_out)}}
	  </div>
    </div>
  </body>
</html>
